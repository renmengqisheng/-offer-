题目描述

将一个字符串转换成一个整数(实现Integer.valueOf(string)的功能，但是string不符合数字要求时返回0)，要求不能使用字符串转换整数的库函数。 数值为0或者字符串不是一个合法的数值则返回0。

输入描述:

输入一个字符串,包括数字字母符号,可以为空

输出描述:

如果是合法的数值表达则返回该数字，否则返回0

示例1

输入

+2147483647

    1a33
    
输出

2147483647

    0
    
思路：

根据第一个字符是否为'-'确定符号。如果第一个字符是符号位，则从第二个字符开始判断是否为数字字符。如果不是数字字符，直接返回0，否则将之前的和乘以10再加上当前数字。

res = (res << 1) + (res << 3) + (str[i] & 0xf)和res = res * 10 + str[i] - '0'是一样的。左移是乘以2的次方。(res << 1) + (res << 3) = res * 2 + res * 8 = res * 10。字符'0'到'9'的ascii值的低4个二进制位刚好就是0到9所以str[i] & 0xf 等于str[i]-'0'。位运算会比乘法运算效率高。针对字符0-9的，0-9的ascii码值为0x30，0x31，0x32 0x33 ...0x39，因此与0x0f按位与后只保留个位上的书即0x0，0x1，……，0x9。
